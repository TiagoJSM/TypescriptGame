var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},GameFramework;!function(a){var b=function(){function a(){this.orderInLayer=0}return a}();a.BaseComponent=b;var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.Update=function(a){},b}(b);a.RenderableComponent=c}(GameFramework||(GameFramework={}));var GameFramework;!function(a){var b=function(){function a(a){this.context=a.getContext("2d")}return a.prototype.Render=function(a){var b=a.transform.scale,c=a.transform.rotate,d=a.transform.position;this.context.scale(b.x,b.y),this.context.rotate(c),this.context.translate(d.x,d.y)},a.prototype.Clear=function(a){this.context.fillStyle="rgb(+"+a.r+","+a.g+","+a.b+")"},a.prototype.SetTransformToOrigin=function(){this.context.setTransform(1,0,0,1,0,0)},a.prototype.SaveTransform=function(){this.context.save()},a.prototype.RestoreTransform=function(){this.context.restore()},a}();a.CanvasManager=b}(GameFramework||(GameFramework={}));var GameFramework;!function(a){var b;!function(a){var b=function(){function a(a,b){this.x=a,this.y=b}return a.Zero=function(){return new a(0,0)},a.One=function(){return new a(1,1)},a}();a.Vector2=b;var c=function(){function a(){this.scale=b.One()}return a}();a.Transform=c;var d=function(){function a(){this.r=0,this.g=0,this.b=0,this.a=0}return a}();a.Color=d}(b=a.Data||(a.Data={}))}(GameFramework||(GameFramework={}));var GameFramework;!function(a){var b=function(){function b(b,c){this.entities=new Array,this.canvas=b,this.document=c,this.screenManager=new a.CanvasManager(this.canvas),this.screenManager.SetTransformToOrigin(),this.screenManager.SaveTransform()}return b.prototype.Update=function(a){for(var b in this.entities)b.Update(a)},b.prototype.Render=function(){var a=this.entities.sort(this.EntitiesOrderFunc);for(var b in a)this.screenManager.RestoreTransform()},b.prototype.GetComponent=function(a){var b=new a;return b},b.prototype.GetEntity=function(b){var c=new a.GameEntity;return c.componentFactory=this,c.name=b,c},b.prototype.EntitiesOrderFunc=function(a){return a.orderInLayer},b.prototype.RenderComponentsInEntity=function(b){b.GetComponentsOfType(a.RenderableComponent)},b}();a.Engine=b}(GameFramework||(GameFramework={}));var GameFramework;!function(a){var b=function(){function b(){this.orderInLayer=0,this.transform=new a.Data.Transform}return b.prototype.Update=function(a){for(var b in this.components)b.Update(a)},b.prototype.AddComponent=function(a){return this.componentFactory.GetComponent(a)},b.prototype.GetComponents=function(){return this.components.slice()},b.prototype.GetComponentsOfType=function(a){return this.components.filter(function(b,c,d){return b instanceof a})},b.prototype.GetComponent=function(a){var b=this.GetComponentsOfType(a);return 0==b.length?null:b[0]},b}();a.GameEntity=b}(GameFramework||(GameFramework={}));var GameFramework;!function(a){var b=function(){function a(a){this.context=a.getContext("2d")}return a.prototype.Render=function(a){var b=a.transform.scale,c=a.transform.rotate,d=a.transform.position;this.context.scale(b.x,b.y),this.context.rotate(c),this.context.translate(d.x,d.y)},a.prototype.Clear=function(a){this.context.fillStyle="rgb(+"+a.r+","+a.g+","+a.b+")"},a}();a.CanvasRenderer=b}(GameFramework||(GameFramework={}));var GameFramework;!function(a){var b=function(){function a(){}return a.prototype.Start=function(){this.startTime=new Date},a.prototype.MarkTime=function(){this.currentTime=new Date},a.prototype.GetMillis=function(){return Math.round(this.currentTime.getTime()-this.startTime.getTime())},a}();a.Stopwatch=b}(GameFramework||(GameFramework={})),$(function(){var a=document.getElementById("canvas"),b=new GameFramework.Engine(a,document),c=new GameFramework.Stopwatch;c.Start();setInterval(function(){c.MarkTime(),b.Update(c.GetMillis()),b.Render(),$("p").text(c.GetMillis())},60)});